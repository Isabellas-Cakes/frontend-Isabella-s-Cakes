"use strict";(self["webpackChunkinterfaz"]=self["webpackChunkinterfaz"]||[]).push([[11],{11:function(e,a,i){i.r(a),i.d(a,{default:function(){return B}});i(4114),i(8111),i(2489);var l=i(6768),n=i(4232),s=i(5130),c=i(144),t=i(1387),o=i(4373);const u={class:"inv"},r={class:"inv__header"},d={class:"tabs",role:"tablist","aria-label":"Ubicaci√≥n"},v=["aria-selected","onClick"],p={key:0,class:"tab__count"},k={class:"card"},b={class:"card__title"},C={class:"form__row"},_=["disabled"],m={key:0},y={key:1,class:"spinner"},L={key:0,class:"form__error"},E={class:"card"},f={class:"card__title-row"},h={class:"card__title"},X={key:0,class:"empty"},K={key:1,class:"list"},g={class:"list__main"},w={class:"list__desc"},R={class:"actions"},A=["disabled","onClick"],F={key:0},I={key:1,class:"spinner"},N=["onClick"],P=["onClick"],W={key:2,class:"empty"},V="http://localhost:8080/api/inventario-cosina";var $={__name:"InventarioCocina",setup(e){const a=(0,t.rd)(),i=()=>{a.push({name:"ConsultaSolisitudes"})},$=["Cocina","Barra"],U=(0,c.KR)("Cocina"),q=(0,c.KR)([]),B=(0,c.KR)(!0),D=(0,c.KR)(!1),Q=(0,c.KR)(!1),z=(0,c.KR)(""),J=(0,c.KR)({descripcion:"",ubicacion:U.value}),S=(0,c.KR)(null),x=(0,c.KR)({descripcion:"",estado:"Pendiente"}),G=async()=>{B.value=!0;try{const{data:e}=await o.A.get(V);q.value=Array.isArray(e)?e:[]}catch(e){console.error(e),z.value="No se pudieron cargar los √≠tems"}finally{B.value=!1}},j=async()=>{if(z.value="",J.value.descripcion){D.value=!0;try{const e={descripcion:J.value.descripcion,ubicacion:U.value},{data:a}=await o.A.post(V,e);a&&q.value.unshift(a),J.value={descripcion:"",ubicacion:U.value}}catch(e){console.error(e),z.value="No se pudo enviar la solicitud"}finally{D.value=!1}}},H=e=>{S.value=e.id_item??e.id,x.value={descripcion:e.descripcion,estado:e.estado??"Pendiente"}},M=()=>{S.value=null,x.value={descripcion:"",estado:"Pendiente"}},O=async e=>{Q.value=!0;try{const a="Cocina"===e.ubicacion?{descripcion:x.value.descripcion}:{descripcion:x.value.descripcion,estado:x.value.estado},i=e.id_item??e.id,{data:l}=await o.A.put(`${V}/${i}`,a),n=q.value.findIndex(e=>(e.id_item??e.id)===i);-1!==n&&(q.value[n]={...q.value[n],...l}),M()}catch(a){console.error(a),z.value="No se pudo guardar la edici√≥n"}finally{Q.value=!1}},T=async e=>{const a=e.id_item??e.id;if(confirm("¬øEliminar esta solicitud?"))try{await o.A.delete(`${V}/${a}`),q.value=q.value.filter(e=>(e.id_item??e.id)!==a)}catch(i){console.error(i),z.value="No se pudo eliminar el √≠tem"}},Y=(0,l.EW)(()=>q.value.filter(e=>e.ubicacion===U.value).sort((e,a)=>e.estado===a.estado?0:"Pendiente"===e.estado?-1:1)),Z=(0,l.EW)(()=>{const e={Cocina:0,Barra:0};for(const a of q.value)void 0!==e[a.ubicacion]&&e[a.ubicacion]++;return e}),ee=e=>{U.value=e,J.value.ubicacion=e};return(0,l.sV)(G),(e,a)=>((0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("header",r,[a[3]||(a[3]=(0,l.Lk)("h2",null,"Inventario",-1)),(0,l.Lk)("nav",d,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)($,e=>(0,l.Lk)("button",{key:e,class:(0,n.C4)(["tab",{"tab--active":U.value===e}]),role:"tab","aria-selected":U.value===e,onClick:a=>ee(e)},[(0,l.eW)((0,n.v_)(e)+" ",1),void 0!==Z.value[e]?((0,l.uX)(),(0,l.CE)("span",p,(0,n.v_)(Z.value[e]),1)):(0,l.Q3)("",!0)],10,v)),64))]),(0,l.Lk)("button",{class:"btn btn--accent",onClick:i}," Ver solicitudes ")]),(0,l.Lk)("section",k,[(0,l.Lk)("h3",b,"Nueva solicitud ‚Äî "+(0,n.v_)(U.value),1),(0,l.Lk)("form",{class:"form",onSubmit:(0,s.D$)(j,["prevent"])},[(0,l.Lk)("div",C,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>J.value.descripcion=e),class:"input",placeholder:"Describe lo que necesitas...",required:""},null,512),[[s.Jo,J.value.descripcion,void 0,{trim:!0}]]),(0,l.Lk)("button",{class:"btn",type:"submit",disabled:D.value||!J.value.descripcion},[D.value?((0,l.uX)(),(0,l.CE)("span",y)):((0,l.uX)(),(0,l.CE)("span",m,"Enviar"))],8,_)]),z.value?((0,l.uX)(),(0,l.CE)("p",L,(0,n.v_)(z.value),1)):(0,l.Q3)("",!0)],32)]),(0,l.Lk)("section",E,[(0,l.Lk)("div",f,[(0,l.Lk)("h3",h,"Listado ‚Äî "+(0,n.v_)(U.value),1)]),B.value?((0,l.uX)(),(0,l.CE)("div",X,a[4]||(a[4]=[(0,l.Lk)("span",{class:"spinner"},null,-1),(0,l.eW)(" Cargando‚Ä¶ ",-1)]))):Y.value.length?((0,l.uX)(),(0,l.CE)("ul",K,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Y.value,e=>((0,l.uX)(),(0,l.CE)("li",{key:e.id_item??e.id??e.descripcion,class:"list__item"},[(0,l.Lk)("div",g,[S.value===(e.id_item??e.id)?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>x.value.descripcion=e),class:"input input--inline",placeholder:"Descripci√≥n",required:""},null,512),[[s.Jo,x.value.descripcion,void 0,{trim:!0}]]),"Barra"===e.ubicacion?(0,l.bo)(((0,l.uX)(),(0,l.CE)("select",{key:0,"onUpdate:modelValue":a[2]||(a[2]=e=>x.value.estado=e),class:"input input--inline"},a[5]||(a[5]=[(0,l.Lk)("option",{value:"Pendiente"},"Pendiente",-1),(0,l.Lk)("option",{value:"Entregado"},"Entregado",-1)]),512)),[[s.u1,x.value.estado]]):(0,l.Q3)("",!0)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("span",w,(0,n.v_)(e.descripcion),1),(0,l.Lk)("span",{class:(0,n.C4)(["chip","Entregado"===e.estado?"chip--ok":"chip--warn"])},(0,n.v_)(e.estado),3)],64))]),(0,l.Lk)("div",R,[S.value===(e.id_item??e.id)?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("button",{class:"btn btn--ghost",onClick:M},"Cancelar"),(0,l.Lk)("button",{class:"btn",disabled:Q.value,onClick:a=>O(e)},[Q.value?((0,l.uX)(),(0,l.CE)("span",I)):((0,l.uX)(),(0,l.CE)("span",F,"Guardar"))],8,A)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("button",{class:"icon",title:"Editar",onClick:a=>H(e)},"‚úèÔ∏è",8,N),(0,l.Lk)("button",{class:"icon icon--danger",title:"Eliminar",onClick:a=>T(e)},"üóëÔ∏è",8,P)],64))])]))),128))])):((0,l.uX)(),(0,l.CE)("div",W,[(0,l.Lk)("p",null,[a[6]||(a[6]=(0,l.eW)("No hay √≠tems en ",-1)),(0,l.Lk)("strong",null,(0,n.v_)(U.value),1),a[7]||(a[7]=(0,l.eW)(".",-1))]),a[8]||(a[8]=(0,l.Lk)("p",{class:"muted"},"Agrega el primero con el formulario de arriba.",-1))]))])]))}},U=i(1241);const q=(0,U.A)($,[["__scopeId","data-v-54df1ab2"]]);var B=q}}]);
//# sourceMappingURL=11.663f60c6.js.map