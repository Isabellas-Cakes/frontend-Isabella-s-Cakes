"use strict";(self["webpackChunkinterfaz"]=self["webpackChunkinterfaz"]||[]).push([[201],{1113:function(e,a,t){t.r(a),t.d(a,{default:function(){return R}});t(4114),t(8111),t(2489),t(1701),t(8237),t(3579);var o=t(6768),l=t(4232),i=t(144),d=t(1387),n=t(4373),r=t(1714),s=t(5972),u=t(4789),c=t(222),p=t(4810),_=t(5939),v=t(6978),m=t(6832),b=t(5526),k=t(8388),f=t(5673),g=t(8959),h=t(8150),F=t(6838),y=t(4629),W=t(1539),w=t(365),x=t(9293),C=t(8741),E=t(8210),A=t(2034),L=t(9416),X=t(4797);const K={key:0,class:"mt-2"},V={class:"mb-0 ps-3"},D={key:0,class:"badge bg-success ms-2"},Q={class:"text-grey text-caption"},I={class:"d-flex align-center justify-space-between"},$={class:"d-flex align-center"},S={class:"mx-2"},B={key:0,class:"mt-2"},P={key:0,class:"text-red mt-2"},T={key:1,class:"text-red mt-2"};var U={__name:"NuevoPedido",setup(e){const a=(0,d.lq)(),t=a.params.mesaId,U=(0,i.KR)([]),N=(0,i.KR)([]),R=(0,i.KR)(""),z=(0,i.KR)(!1),M=(0,i.KR)(!1),J=(0,i.Kh)({show:!1,text:"",color:"green"}),O=(e,a="green")=>{J.text=e,J.color=a,J.show=!0},j=(0,i.KR)(Date.now());let Y=null;const G=(0,i.Kh)({id_miembro:1,id_mesa:t,nombre:"",minutos:null,estado:"pendiente",id_pedido:null,inicio_preparacion:null,articulos:[]}),q=(0,r.io)("http://localhost:8080"),Z=(0,o.EW)(()=>G.articulos.reduce((e,a)=>e+a.precio*a.cantidad,0)),H=(0,o.EW)(()=>U.value.filter(e=>N.value.some(a=>a.id_categoria===e.id_categoria))),ee=(0,o.EW)(()=>N.value.filter(e=>e.nombre?.toLowerCase().includes(R.value.toLowerCase()||""))),ae=(0,o.EW)(()=>{const e={};for(const a of G.articulos.filter(e=>e.yaAgregado)){const t=`${a.nombre}|${a.precio}|${a.extra||""}`;e[t]||(e[t]={...a,cantidad:0}),e[t].cantidad+=a.cantidad}return Object.values(e)}),te=(0,o.EW)(()=>""!==G.nombre.trim()&&G.articulos.length>0),oe=(0,o.EW)(()=>"servido"===G.estado?"info":"listo"===G.estado?"success":"en preparaciÃ³n"===G.estado?"warning":"info"),le=(0,o.EW)(()=>"servido"===G.estado?"mdi-cash":"listo"===G.estado?"mdi-check-circle":"en preparaciÃ³n"===G.estado?"mdi-fire":"mdi-information"),ie=(0,o.EW)(()=>"servido"===G.estado?"blue lighten-4":"listo"===G.estado?"green lighten-4":"en preparaciÃ³n"===G.estado?"orange lighten-4":"blue lighten-4"),de=(0,o.EW)(()=>{if(!G.inicio_preparacion)return 0;const e=new Date(G.inicio_preparacion).getTime(),a=j.value-e,t=Math.floor(a/6e4);return t<0?0:t}),ne=()=>{G.nombre=G.nombre.replace(/[^a-zA-Z]/g,"")},re=e=>{const a={...e,cantidad:1,extra:"",expandido:!1,yaAgregado:!1,_uid:Date.now()+Math.random()};G.articulos.push(a)},se=e=>{const a={...e,_uid:Date.now()+Math.random(),yaAgregado:!1};G.articulos.push(a)},ue=e=>{const a=G.articulos.indexOf(e);-1!==a&&G.articulos.splice(a,1)},ce=e=>G.articulos.filter(a=>a.id_categoria===e).reduce((e,a)=>e+a.precio*a.cantidad,0),pe=e=>{const a=G.articulos.filter(e=>!e.yaAgregado).map(e=>e.id_articulo);return N.value.filter(t=>t.id_categoria===e&&t.nombre?.toLowerCase().includes(R.value.toLowerCase()||"")&&!a.includes(t.id_articulo))},_e=()=>{G.id_pedido=null,G.estado="pendiente",G.nombre="",G.minutos=null,G.articulos=[]};q.on("estado-pedido-actualizado",async({id_pedido:e})=>{if(G.id_pedido===e)try{const a=await n.A.get(`http://localhost:8080/api/pedidos/${e}`),t=a.data;G.estado=t.estado,G.inicio_preparacion=t.inicio_preparacion}catch(a){console.error("sync pedido:",a)}}),q.on("detalle-preparado",e=>{if(e.id_pedido!==G.id_pedido)return;const a=G.articulos.findIndex(a=>a.id_detalle===e.id_detalle);-1!==a&&G.articulos.splice(a,1,{...G.articulos[a],preparado:!0})});const ve=async()=>{if(!z.value){z.value=!0;try{let e=G.id_pedido;if(!e){const a=await n.A.post("http://localhost:8080/api/pedidos",{nombre:G.nombre||"Pedido sin nombre",total:Z.value,estado:"pendiente",fecha_hora:(new Date).toISOString(),id_miembro:G.id_miembro,id_mesa:t});e=a.data.pedido.id_pedido,G.id_pedido=e,q.emit("nuevo-pedido",{id_pedido:e}),q.emit("nuevo-pedido-creado",{id_pedido:e})}let a=!1;for(const t of G.articulos)t.yaAgregado||(a=!0,await n.A.post("http://localhost:8080/api/detallepedido",{id_pedido:e,id_articulo:t.id_articulo,cantidad:t.cantidad,precio_unitario:t.precio,subtotal:t.precio*t.cantidad,extra:t.extra,cuenta:"General",preparado:!1}),q.emit("nuevo-detalle-agregado",{id_pedido:e}),t.yaAgregado=!0);"listo"===G.estado&&a&&(await n.A.put(`http://localhost:8080/api/pedidos/${e}`,{estado:"pendiente"}),q.emit("estado-pedido-actualizado",{id_pedido:e,nuevoEstado:"pendiente"}),G.estado="pendiente"),await n.A.put(`http://localhost:8080/api/pedidos/${e}`,{total:Z.value}),await n.A.put(`http://localhost:8080/api/mesas/${t}`,{estado:"ocupada"});const o=await n.A.get(`http://localhost:8080/api/detallepedido/pedido/${e}`);G.articulos=o.data.map(e=>({id_articulo:e.id_articulo,id_detalle:e.id_detalle,nombre:e.nombre||(e.articulo?.nombre??"Sin nombre"),id_categoria:e.id_categoria??e.articulo?.id_categoria??null,precio:parseFloat(e.precio_unitario),cantidad:e.cantidad,extra:e.extra||"",preparado:!!e.preparado,expandido:!1,yaAgregado:!0,_uid:Date.now()+Math.random()})),M.value=!1,O("âœ… Pedido enviado/actualizado","green")}catch(e){console.error(e),M.value=!1,O("âŒ Error al enviar","red")}finally{z.value=!1}}},me=async()=>{try{if(!G.id_pedido||"listo"!==G.estado)return;await n.A.put(`http://localhost:8080/api/pedidos/${G.id_pedido}`,{estado:"servido"}),await n.A.put(`http://localhost:8080/api/mesas/${t}`,{estado:"pendiente_pago"}),q.emit("estado-pedido-actualizado",{id_pedido:G.id_pedido,nuevoEstado:"servido"}),G.estado="servido"}catch(e){console.error("servir:",e)}},be=async()=>{try{G.id_pedido&&(await n.A.put(`http://localhost:8080/api/pedidos/${G.id_pedido}`,{estado:"cancelado"}),await n.A.put(`http://localhost:8080/api/mesas/${t}`,{estado:"libre"}),q.emit("estado-pedido-actualizado",{id_pedido:G.id_pedido,nuevoEstado:"cancelado"})),_e()}catch(e){console.error("cancelar:",e)}};return(0,o.sV)(async()=>{Y=setInterval(()=>j.value=Date.now(),6e4);try{const e=await n.A.get("http://localhost:8080/api/categorias");U.value=e.data;const a=await n.A.get("http://localhost:8080/api/articulos");if(N.value=a.data,!t)return;const o=await n.A.get(`http://localhost:8080/api/pedidos/mesa/${t}/activo`);if(o.data.length>0){const e=o.data[0];if(["activo","pendiente","listo","en preparaciÃ³n"].includes(e.estado)){Object.assign(G,{nombre:e.nombre,minutos:e.minutos,id_miembro:e.id_miembro,estado:e.estado,inicio_preparacion:e.inicio_preparacion,id_pedido:e.id_pedido});const a=await n.A.get(`http://localhost:8080/api/detallepedido/pedido/${G.id_pedido}`);G.articulos=a.data.map(e=>({id_articulo:e.id_articulo,id_detalle:e.id_detalle,nombre:e.nombre||(e.articulo?.nombre??"Sin nombre"),id_categoria:e.id_categoria??e.articulo?.id_categoria??null,precio:parseFloat(e.precio_unitario),cantidad:e.cantidad,extra:e.extra||"",preparado:!!e.preparado,expandido:!1,yaAgregado:!0,_uid:Date.now()+Math.random()}))}else _e()}}catch(e){console.warn("No se pudo cargar pedido activo:",e?.message)}}),(0,o.hi)(()=>{Y&&clearInterval(Y)}),(e,a)=>{const t=(0,o.g2)("v-list-item-content"),i=(0,o.g2)("v-subheader");return(0,o.uX)(),(0,o.Wv)(F.I,{class:"pb-16"},{default:(0,o.k6)(()=>[(0,o.bF)(y.L,null,{default:(0,o.k6)(()=>[(0,o.bF)(W.B,{cols:"12"},{default:(0,o.k6)(()=>a[5]||(a[5]=[(0,o.Lk)("h2",null,"Nuevo pedido",-1)])),_:1,__:[5]}),G.id_pedido?((0,o.uX)(),(0,o.Wv)(W.B,{key:0,cols:"12"},{default:(0,o.k6)(()=>[(0,o.bF)(s.l,{type:oe.value,icon:le.value,color:ie.value,border:"start",class:"mb-2"},{default:(0,o.k6)(()=>[a[8]||(a[8]=(0,o.eW)(" Estado actual: ",-1)),(0,o.Lk)("strong",null,(0,l.v_)(G.estado.toUpperCase()),1),a[9]||(a[9]=(0,o.Lk)("br",null,null,-1)),"servido"===G.estado?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(" âœ… Pedido servido: en espera de pago. No se pueden agregar mÃ¡s artÃ­culos. ")],64)):"en preparaciÃ³n"===G.estado?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[a[7]||(a[7]=(0,o.Lk)("p",null,[(0,o.eW)("El pedido estÃ¡ en preparaciÃ³n. "),(0,o.Lk)("strong",null,"Puedes agregar artÃ­culos nuevos"),(0,o.eW)(" y se enviarÃ¡n a cocina.")],-1)),G.articulos.length?((0,o.uX)(),(0,o.CE)("div",K,[a[6]||(a[6]=(0,o.Lk)("h6",{class:"fw-bold mb-1"},"ArtÃ­culos del pedido:",-1)),(0,o.Lk)("ul",V,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(G.articulos,e=>((0,o.uX)(),(0,o.CE)("li",{key:e._uid},[(0,o.eW)((0,l.v_)(e.cantidad)+" Ã— "+(0,l.v_)(e.nombre)+" ",1),e.preparado?((0,o.uX)(),(0,o.CE)("span",D,"âœ… Listo")):(0,o.Q3)("",!0)]))),128))])])):(0,o.Q3)("",!0)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.eW)(" Puedes agregar mÃ¡s artÃ­culos si el cliente lo solicita. ")],64))]),_:1,__:[8,9]},8,["type","icon","color"])]),_:1})):(0,o.Q3)("",!0),"en preparaciÃ³n"===G.estado&&G.inicio_preparacion?((0,o.uX)(),(0,o.Wv)(W.B,{key:1,cols:"12"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Q," â³ En preparaciÃ³n desde hace "+(0,l.v_)(de.value)+" minuto(s) ",1)]),_:1})):(0,o.Q3)("",!0),(0,o.bF)(W.B,{cols:"12",class:"text-right"},{default:(0,o.k6)(()=>[(0,o.bF)(u.D,{color:"green",onClick:ve,disabled:!te.value||"servido"===G.estado||z.value},{default:(0,o.k6)(()=>[(0,o.bF)(w.w,{start:""},{default:(0,o.k6)(()=>a[10]||(a[10]=[(0,o.eW)("mdi-send",-1)])),_:1,__:[10]}),(0,o.eW)(" "+(0,l.v_)(z.value?"Enviando...":"Enviar"),1)]),_:1},8,["disabled"]),(0,o.bF)(u.D,{color:"red",class:"ml-2",onClick:be,disabled:"servido"===G.estado||"cancelado"===G.estado},{default:(0,o.k6)(()=>[(0,o.bF)(w.w,{start:""},{default:(0,o.k6)(()=>a[11]||(a[11]=[(0,o.eW)("mdi-cancel",-1)])),_:1,__:[11]}),a[12]||(a[12]=(0,o.eW)(" Cancelar ",-1))]),_:1,__:[12]},8,["disabled"]),G.id_pedido&&"listo"===G.estado?((0,o.uX)(),(0,o.Wv)(u.D,{key:0,color:"teal",class:"ml-2",onClick:me},{default:(0,o.k6)(()=>[(0,o.bF)(w.w,{start:""},{default:(0,o.k6)(()=>a[13]||(a[13]=[(0,o.eW)("mdi-check-circle",-1)])),_:1,__:[13]}),a[14]||(a[14]=(0,o.eW)(" Marcar como servido ",-1))]),_:1,__:[14]})):(0,o.Q3)("",!0)]),_:1})]),_:1}),(0,o.bF)(X.W,{modelValue:G.nombre,"onUpdate:modelValue":a[0]||(a[0]=e=>G.nombre=e),label:"Nombre","prepend-inner-icon":"mdi-pencil",onInput:ne},null,8,["modelValue"]),(0,o.Lk)("h3",null,"Total de pedido: Q"+(0,l.v_)(Z.value.toFixed(2)),1),(0,o.bF)(X.W,{modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",clearable:""},null,8,["modelValue"]),(R.value||"").trim()&&ee.value.length?((0,o.uX)(),(0,o.Wv)(x.x8,{key:0,class:"mb-4 elevation-1"},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(ee.value,e=>((0,o.uX)(),(0,o.Wv)(C.g,{key:e.id_articulo,onClick:a=>re(e)},{default:(0,o.k6)(()=>[(0,o.bF)(t,null,{default:(0,o.k6)(()=>[(0,o.bF)(E.U,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.nombre),1)]),_:2},1024),(0,o.bF)(A.w,null,{default:(0,o.k6)(()=>[(0,o.eW)("Q"+(0,l.v_)(e.precio),1)]),_:2},1024)]),_:2},1024),(0,o.bF)(w.w,{color:"green"},{default:(0,o.k6)(()=>a[15]||(a[15]=[(0,o.eW)("mdi-plus",-1)])),_:1,__:[15]})]),_:2},1032,["onClick"]))),128))]),_:1})):(0,o.Q3)("",!0),(0,o.bF)(k.$,null,{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(H.value,e=>((0,o.uX)(),(0,o.Wv)(f.c,{key:e.id_categoria},{default:(0,o.k6)(()=>[(0,o.bF)(g.w,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.nombre)+" (Q"+(0,l.v_)(ce(e.id_categoria).toFixed(2))+") ",1)]),_:2},1024),(0,o.bF)(h.T,null,{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(G.articulos.filter(a=>a.id_categoria===e.id_categoria&&!a.yaAgregado),e=>((0,o.uX)(),(0,o.Wv)(c.J,{key:e._uid,class:"mb-3"},{default:(0,o.k6)(()=>[(0,o.bF)(p.O,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",I,[(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,(0,l.v_)(e.nombre),1),(0,o.Lk)("div",null,"Q"+(0,l.v_)(e.precio),1)]),(0,o.Lk)("div",$,[(0,o.bF)(u.D,{icon:"",onClick:a=>e.expandido=!e.expandido},{default:(0,o.k6)(()=>[(0,o.bF)(w.w,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.expandido?"mdi-check":"mdi-dots-horizontal"),1)]),_:2},1024)]),_:2},1032,["onClick"]),(0,o.bF)(u.D,{icon:"",onClick:a=>e.cantidad--,disabled:e.cantidad<=1},{default:(0,o.k6)(()=>[(0,o.bF)(w.w,null,{default:(0,o.k6)(()=>a[16]||(a[16]=[(0,o.eW)("mdi-minus",-1)])),_:1,__:[16]})]),_:2},1032,["onClick","disabled"]),(0,o.Lk)("div",S,(0,l.v_)(e.cantidad),1),(0,o.bF)(u.D,{icon:"",onClick:a=>e.cantidad++},{default:(0,o.k6)(()=>[(0,o.bF)(w.w,null,{default:(0,o.k6)(()=>a[17]||(a[17]=[(0,o.eW)("mdi-plus",-1)])),_:1,__:[17]})]),_:2},1032,["onClick"])])]),e.expandido?((0,o.uX)(),(0,o.CE)("div",B,[(0,o.bF)(X.W,{modelValue:e.extra,"onUpdate:modelValue":a=>e.extra=a,label:"Algo extra",dense:""},null,8,["modelValue","onUpdate:modelValue"]),(0,o.bF)(y.L,{class:"mt-2"},{default:(0,o.k6)(()=>[(0,o.bF)(W.B,{cols:"6"},{default:(0,o.k6)(()=>[(0,o.bF)(u.D,{block:"",color:"teal",onClick:a=>se(e)},{default:(0,o.k6)(()=>[(0,o.bF)(w.w,{start:""},{default:(0,o.k6)(()=>a[18]||(a[18]=[(0,o.eW)("mdi-content-copy",-1)])),_:1,__:[18]}),a[19]||(a[19]=(0,o.eW)(" Duplicar ",-1))]),_:2,__:[19]},1032,["onClick"])]),_:2},1024),(0,o.bF)(W.B,{cols:"6"},{default:(0,o.k6)(()=>[(0,o.bF)(u.D,{block:"",color:"red",onClick:a=>ue(e)},{default:(0,o.k6)(()=>[(0,o.bF)(w.w,{start:""},{default:(0,o.k6)(()=>a[20]||(a[20]=[(0,o.eW)("mdi-delete",-1)])),_:1,__:[20]}),a[21]||(a[21]=(0,o.eW)(" Eliminar ",-1))]),_:2,__:[21]},1032,["onClick"])]),_:2},1024)]),_:2},1024)])):(0,o.Q3)("",!0)]),_:2},1024)]),_:2},1024))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(pe(e.id_categoria),e=>((0,o.uX)(),(0,o.Wv)(C.g,{key:e.id_articulo,onClick:a=>re(e)},{default:(0,o.k6)(()=>[(0,o.bF)(t,null,{default:(0,o.k6)(()=>[(0,o.bF)(E.U,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.nombre),1)]),_:2},1024),(0,o.bF)(A.w,null,{default:(0,o.k6)(()=>[(0,o.eW)("Q"+(0,l.v_)(e.precio),1)]),_:2},1024)]),_:2},1024),(0,o.bF)(w.w,{color:"green"},{default:(0,o.k6)(()=>a[22]||(a[22]=[(0,o.eW)("mdi-plus",-1)])),_:1,__:[22]})]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1}),a[29]||(a[29]=(0,o.Lk)("h3",{class:"mt-6"},"Resumen del pedido",-1)),(0,o.bF)(c.J,{class:"mb-4",outlined:""},{default:(0,o.k6)(()=>[(0,o.bF)(_.r,null,{default:(0,o.k6)(()=>[(0,o.eW)(" ArtÃ­culos del pedido - Total: Q"+(0,l.v_)(Z.value.toFixed(2)),1)]),_:1}),(0,o.bF)(b.G),(0,o.bF)(p.O,null,{default:(0,o.k6)(()=>[(0,o.bF)(x.x8,{dense:""},{default:(0,o.k6)(()=>[ae.value.length?((0,o.uX)(),(0,o.Wv)(i,{key:0,class:"pl-0"},{default:(0,o.k6)(()=>a[23]||(a[23]=[(0,o.eW)(" ðŸ§¾ Ya en el pedido ",-1)])),_:1,__:[23]})):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(ae.value,e=>((0,o.uX)(),(0,o.Wv)(C.g,{key:`${e.nombre}_${e.precio}_${e.extra}`},{default:(0,o.k6)(()=>[(0,o.bF)(t,null,{default:(0,o.k6)(()=>[(0,o.bF)(E.U,{style:{"font-family":"monospace"}},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.cantidad)+" Ã— "+(0,l.v_)(e.nombre)+" â€” Q"+(0,l.v_)((e.precio*e.cantidad).toFixed(2)),1)]),_:2},1024),e.extra?((0,o.uX)(),(0,o.Wv)(A.w,{key:0},{default:(0,o.k6)(()=>[(0,o.eW)(" Extra: "+(0,l.v_)(e.extra),1)]),_:2},1024)):(0,o.Q3)("",!0)]),_:2},1024)]),_:2},1024))),128)),G.articulos.some(e=>!e.yaAgregado)?((0,o.uX)(),(0,o.Wv)(i,{key:1,class:"pl-0 mt-2"},{default:(0,o.k6)(()=>a[24]||(a[24]=[(0,o.eW)(" ðŸ†• Nuevos artÃ­culos ",-1)])),_:1,__:[24]})):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(G.articulos.filter(e=>!e.yaAgregado),e=>((0,o.uX)(),(0,o.Wv)(C.g,{key:"nuevo_"+e._uid},{default:(0,o.k6)(()=>[(0,o.bF)(t,null,{default:(0,o.k6)(()=>[(0,o.bF)(E.U,{style:{"font-family":"monospace"}},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.cantidad)+" Ã— "+(0,l.v_)(e.nombre)+" â€” Q"+(0,l.v_)((e.precio*e.cantidad).toFixed(2)),1)]),_:2},1024),e.extra?((0,o.uX)(),(0,o.Wv)(A.w,{key:0},{default:(0,o.k6)(()=>[(0,o.eW)(" Extra: "+(0,l.v_)(e.extra),1)]),_:2},1024)):(0,o.Q3)("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),(0,o.bF)(m.p,{modelValue:M.value,"onUpdate:modelValue":a[3]||(a[3]=e=>M.value=e),"max-width":"500"},{default:(0,o.k6)(()=>[(0,o.bF)(c.J,null,{default:(0,o.k6)(()=>[(0,o.bF)(_.r,null,{default:(0,o.k6)(()=>a[25]||(a[25]=[(0,o.eW)("Â¿Enviar pedido?",-1)])),_:1,__:[25]}),(0,o.bF)(p.O,null,{default:(0,o.k6)(()=>[(0,o.eW)(" Total: Q"+(0,l.v_)(Z.value.toFixed(2)),1),a[26]||(a[26]=(0,o.Lk)("br",null,null,-1)),(0,o.eW)(" ArtÃ­culos: "+(0,l.v_)(G.articulos.length)+" ",1),0===G.articulos.length?((0,o.uX)(),(0,o.CE)("div",P," âš ï¸ Debes agregar al menos un artÃ­culo antes de enviar el pedido. ")):(0,o.Q3)("",!0),G.nombre.trim()?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",T," âš ï¸ Debes ingresar un nombre. "))]),_:1,__:[26]}),(0,o.bF)(v.S,null,{default:(0,o.k6)(()=>[(0,o.bF)(u.D,{text:"",onClick:a[2]||(a[2]=e=>M.value=!1)},{default:(0,o.k6)(()=>a[27]||(a[27]=[(0,o.eW)("Cancelar",-1)])),_:1,__:[27]}),(0,o.bF)(u.D,{color:"green",disabled:!te.value||"servido"===G.estado||z.value,onClick:ve},{default:(0,o.k6)(()=>[(0,o.bF)(w.w,{start:""},{default:(0,o.k6)(()=>a[28]||(a[28]=[(0,o.eW)("mdi-send",-1)])),_:1,__:[28]}),(0,o.eW)(" "+(0,l.v_)(z.value?"Enviando...":"Confirmar"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,o.bF)(L.K,{modelValue:J.show,"onUpdate:modelValue":a[4]||(a[4]=e=>J.show=e),color:J.color,timeout:"2500"},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(J.text),1)]),_:1},8,["modelValue","color"])]),_:1,__:[29]})}}};const N=U;var R=N},9416:function(e,a,t){t.d(a,{K:function(){return w}});t(8111),t(8237);var o=t(6768),l=t(6029),i=t(223),d=t(5282),n=t(9592),r=t(6315),s=t(1773),u=t(6729),c=t(8432),p=t(329),_=t(6349),v=t(2225),m=t(9948),b=t(6573),k=t(144),f=t(8392),g=t(7443),h=t(4396),F=t(5081);function y(e){const a=(0,k.IJ)(e());let t=-1;function l(){clearInterval(t)}function i(){l(),(0,o.dY)(()=>a.value=e())}function d(o){const i=o?getComputedStyle(o):{transitionDuration:.2},d=1e3*parseFloat(i.transitionDuration)||200;if(l(),a.value<=0)return;const n=performance.now();t=window.setInterval(()=>{const t=performance.now()-n+d;a.value=Math.max(e()-t,0),a.value<=0&&l()},d)}return(0,k.jr)(l),{clear:l,time:a,start:d,reset:i}}const W=(0,f.j)({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...(0,s.M)({location:"bottom"}),...(0,u.S)(),...(0,p.S)(),...(0,b.gI)(),...(0,v.yx)(),...(0,g.cJ)((0,i.D)({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),w=(0,h.RW)()({name:"VSnackbar",props:W(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const s=(0,c.q)(e,"modelValue"),{positionClasses:f}=(0,u.J)(e),{scopeId:h}=(0,_.b)(),{themeClasses:W}=(0,v.NX)(e),{colorClasses:w,colorStyles:x,variantClasses:C}=(0,b.rn)(e),{roundedClasses:E}=(0,p.v)(e),A=y(()=>Number(e.timeout)),L=(0,k.KR)(),X=(0,k.KR)(),K=(0,k.IJ)(!1),V=(0,k.IJ)(0),D=(0,k.KR)(),Q=(0,o.WQ)(n.aF,void 0);(0,m.Y)(()=>!!Q,()=>{const e=(0,n.gK)();(0,o.nT)(()=>{D.value=e.mainStyles.value})}),(0,o.wB)(s,$),(0,o.wB)(()=>e.timeout,$),(0,o.sV)(()=>{s.value&&$()});let I=-1;function $(){A.reset(),window.clearTimeout(I);const a=Number(e.timeout);if(!s.value||-1===a)return;const t=(0,g._p)(X.value);A.start(t),I=window.setTimeout(()=>{s.value=!1},a)}function S(){A.reset(),window.clearTimeout(I)}function B(){K.value=!0,S()}function P(){K.value=!1,$()}function T(e){V.value=e.touches[0].clientY}function U(e){Math.abs(V.value-e.changedTouches[0].clientY)>50&&(s.value=!1)}function N(){K.value&&P()}const R=(0,o.EW)(()=>e.location.split(" ").reduce((e,a)=>(e[`v-snackbar--${a}`]=!0,e),{}));return(0,F.C)(()=>{const a=i.L.filterProps(e),n=!!(t.default||t.text||e.text);return(0,o.bF)(i.L,(0,o.v6)({ref:L,class:["v-snackbar",{"v-snackbar--active":s.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},R.value,f.value,e.class],style:[D.value,e.style]},a,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,contentProps:(0,o.v6)({class:["v-snackbar__wrapper",W.value,w.value,E.value,C.value],style:[x.value],onPointerenter:B,onPointerleave:P},a.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:T,onTouchend:U,onAfterLeave:N},h),{default:()=>[(0,b.wN)(!1,"v-snackbar"),e.timer&&!K.value&&(0,o.Lk)("div",{key:"timer",class:"v-snackbar__timer"},[(0,o.bF)(d.Z,{ref:X,color:"string"===typeof e.timer?e.timer:"info",max:e.timeout,"model-value":A.time.value},null)]),n&&(0,o.Lk)("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[t.text?.()??e.text,t.default?.()]),t.actions&&(0,o.bF)(l.K,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[(0,o.Lk)("div",{class:"v-snackbar__actions"},[t.actions({isActive:s})])]})],activator:t.activator})}),(0,r.O)({},L)}})}}]);
//# sourceMappingURL=201.12644cdd.js.map